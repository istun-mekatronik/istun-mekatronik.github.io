<!-- Research Detail Page -->
<div class="detail-page">
    <button onclick="Router.goTo('research')" class="btn btn-ghost btn-sm detail-back">
        <i class="fa-solid fa-arrow-left"></i> <span id="researchBackBtn">Back to Research</span>
    </button>
    
    <div class="detail-card">
        <div class="detail-image" id="researchDetailImage"></div>
        <div class="detail-body">
            <div class="detail-meta">
                <span class="tag tag-green" id="researchDetailType">Research</span>
            </div>
            <h1 class="detail-title" id="researchDetailTitle">Loading...</h1>
            <p class="subtitle" id="researchDetailFocus" style="color:var(--text-muted);margin-bottom:1.5rem;"></p>
            
            <div class="detail-info-grid">
                <div class="detail-info-item">
                    <i class="fa-solid fa-user-tie"></i>
                    <div>
                        <span class="detail-info-label" id="researchLabelLead">Lead Researcher</span>
                        <span class="detail-info-value" id="researchDetailLead"></span>
                    </div>
                </div>
                <div class="detail-info-item">
                    <i class="fa-solid fa-users"></i>
                    <div>
                        <span class="detail-info-label" id="researchLabelTeam">Team Size</span>
                        <span class="detail-info-value" id="researchDetailMembers"></span>
                    </div>
                </div>
            </div>
            
            <div class="detail-content" id="researchDetailContent"></div>
            
            <div class="detail-equipment-box" id="researchPublicationsBox" style="display:none;">
                <h4><i class="fa-solid fa-book"></i> <span id="researchLabelPubs">Key Publications</span></h4>
                <p id="researchDetailPublications"></p>
            </div>
            
            <div class="detail-equipment-box" id="researchProjectsBox" style="display:none;background:linear-gradient(135deg, #ede9fe 0%, #e0e7ff 100%);border-left:4px solid var(--purple);">
                <h4 style="color:var(--purple);"><i class="fa-solid fa-flask"></i> <span id="researchLabelProjects">Active Projects</span></h4>
                <p id="researchDetailProjects"></p>
            </div>
            
            <div class="detail-equipment-box" id="researchEquipmentBox" style="display:none;">
                <h4><i class="fa-solid fa-wrench"></i> <span id="researchLabelEquip">Equipment & Tools</span></h4>
                <p id="researchDetailEquipment"></p>
            </div>
        </div>
    </div>
</div>

<script>
(function() {
    function renderResearchDetailPage() {
        const index = window.currentDetailIndex;
        if (typeof index !== 'number' || index < 0) return;
        
        const data = getData('research');
        if (!data || data.length === 0) {
            setTimeout(renderResearchDetailPage, 100);
            return;
        }
        
        const r = data[index];
        if (!r) return;
        
        // Update labels with current language
        document.getElementById('researchBackBtn').textContent = t('Back to Research', 'Araştırmaya Dön');
        document.getElementById('researchLabelLead').textContent = t('Lead Researcher', 'Araştırma Lideri');
        document.getElementById('researchLabelTeam').textContent = t('Team Size', 'Ekip Büyüklüğü');
        document.getElementById('researchLabelPubs').textContent = t('Key Publications', 'Önemli Yayınlar');
        document.getElementById('researchLabelProjects').textContent = t('Active Projects', 'Aktif Projeler');
        document.getElementById('researchLabelEquip').textContent = t('Equipment & Tools', 'Ekipman ve Araçlar');
        
        document.getElementById('researchDetailTitle').textContent = t(r.name_en, r.name_tr);
        document.getElementById('researchDetailFocus').textContent = r.focus || '';
        document.getElementById('researchDetailType').textContent = r.type || 'Research';
        document.getElementById('researchDetailLead').textContent = r.lead || '—';
        document.getElementById('researchDetailMembers').textContent = r.members ? `${r.members} ${t('members', 'üye')}` : '—';
        document.getElementById('researchDetailImage').style.backgroundImage = `url('${r.image || 'https://images.unsplash.com/photo-1485827404703-89b55fcc595e?w=600&q=80'}')`;
        
        // Content with proper line breaks
        const content = t(r.content_en, r.content_tr) || t(r.description_en, r.description_tr);
        document.getElementById('researchDetailContent').innerHTML = content ? content.replace(/\n/g, '<br>') : '';
        
        // Publications
        const pubBox = document.getElementById('researchPublicationsBox');
        if (r.publications) {
            pubBox.style.display = 'block';
            document.getElementById('researchDetailPublications').textContent = r.publications;
        } else {
            pubBox.style.display = 'none';
        }
        
        // Projects
        const projBox = document.getElementById('researchProjectsBox');
        if (r.projects) {
            projBox.style.display = 'block';
            document.getElementById('researchDetailProjects').textContent = r.projects;
        } else {
            projBox.style.display = 'none';
        }
        
        // Equipment
        const equipBox = document.getElementById('researchEquipmentBox');
        if (r.equipment) {
            equipBox.style.display = 'block';
            document.getElementById('researchDetailEquipment').textContent = r.equipment;
        } else {
            equipBox.style.display = 'none';
        }
    }
    
    // Also keep the legacy function name
    window.renderResearchDetail = function(index) {
        window.currentDetailIndex = index;
        renderResearchDetailPage();
    };
    
    // Register render function with multiple naming conventions for router compatibility
    window.renderResearchDetailPage = renderResearchDetailPage;
    window['renderResearch-detailPage'] = renderResearchDetailPage;
    window.renderResearchdetailPage = renderResearchDetailPage;
    
    if (typeof window.currentDetailIndex === 'number') {
        setTimeout(renderResearchDetailPage, 50);
    }
})();
</script>
